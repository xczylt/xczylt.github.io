<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>é€šçŸ¥è½¦ä¸»æŒªè½¦</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            font-family: 'Arial', sans-serif;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 15px;
            transition: background-color 0.3s, color 0.3s;
            overflow: hidden; /* ç¦æ­¢ç½‘é¡µæ‹–åŠ¨ */
        }

        /* ç™½å¤©æ¨¡å¼å’Œå¤œé—´æ¨¡å¼ */
        body.light-mode {
            background-color: #f0f4f8;
            color: #333;
        }

        body.dark-mode {
            background-color: #181818;
            color: #f0f0f0;
        }

        /* å®¹å™¨ */
        .container {
            background-color: #ffffff;
            border-radius: 16px;
            padding: 35px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 700px;
            width: 100%;
            text-align: center;
            box-sizing: border-box;
            min-width: 320px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        /* å¤œé—´æ¨¡å¼ä¸‹å®¹å™¨ */
        .dark-mode .container {
            background-color: #333;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        /* åŠ¨æ€æ ‡é¢˜ */
        h1 {
            font-size: 36px;
            margin-bottom: 20px;
            font-weight: bold;
            animation: titleAnimation 3s ease-in-out infinite;
        }

        @keyframes titleAnimation {
            0% { transform: translateY(0); color: #28a745; }
            50% { transform: translateY(-10px); color: #007bff; }
            100% { transform: translateY(0); color: #28a745; }
        }

        /* è¾“å…¥æ¡† */
        .input-box-textarea {
            width: 100%;
            padding: 18px;
            font-size: 20px;
            border-radius: 10px;
            border: 1px solid #ccc;
            background: #f9f9f9;
            color: #333;
            resize: none;
            min-height: 160px;
            margin-bottom: 20px;
            box-sizing: border-box;
            transition: all 0.3s;
            outline: none;
            overflow: hidden;
        }

        /* å¤œé—´æ¨¡å¼ä¸‹è¾“å…¥æ¡† */
        body.dark-mode .input-box-textarea {
            background: #444;
            color: #f0f0f0;
            border: 1px solid #666;
        }

        .input-box-textarea:focus {
            border-color: #5d9bff;
            background-color: #fff;
            box-shadow: 0 0 8px rgba(93, 155, 255, 0.5);
        }

        .input-box-textarea.dark-mode:focus {
            background-color: #555;
            border-color: #66ccff;
            box-shadow: 0 0 8px rgba(102, 204, 255, 0.5);
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 18px;
            margin-top: 30px;
        }

        .button-group button {
            padding: 20px;
            font-size: 22px;
            font-weight: bold;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.5s, transform 0.3s, box-shadow 0.5s, filter 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 5px;
            position: relative;
            overflow: hidden;
        }

        /* é€šçŸ¥è½¦ä¸»æŒ‰é’®èƒŒæ™¯ä¿®æ”¹ä¸ºæµ…è“è‰²æ¸å˜ */
        .notify-btn {
            background: linear-gradient(90deg, #66ccff 50%, #3399ff 50%);
            background-size: 200% 100%;
            transition: background-color 0.3s;
        }

        .notify-btn:hover {
            background: linear-gradient(45deg, #3399ff, #66ccff);
            transform: translateY(-4px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.2);
            filter: brightness(1.2);
        }

        /* å¤œé—´æ¨¡å¼æŒ‰é’® */
        .dark-mode .notify-btn {
            background: linear-gradient(90deg, #66ccff 50%, #3399ff 50%);
        }

        /* æ‹¨æ‰“ç”µè¯æ»‘åŠ¨æŒ‰é’® */
        .call-btn-container {
            width: 100%;
            height: 50px;
            background-color: #ddd;
            border-radius: 25px;
            position: relative;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: space-between;
            overflow: hidden;
        }

        .call-btn-text {
            position: absolute;
            left: 15px;
            font-size: 16px;
            color: #555;
            transition: opacity 0.3s;
            pointer-events: none;
            text-align: center;
            width: 100%;
        }

        .call-btn-slider {
            width: 50px;
            height: 100%;
            background: linear-gradient(45deg, #17a2b8, #00bcd4);
            border-radius: 25px;
            position: absolute;
            left: 0;
            cursor: pointer;
            transition: transform 0.3s ease, width 0.3s ease;
        }

        .call-btn-container.active .call-btn-slider {
            transform: translateX(100%);
            width: 100%;
        }

        .call-btn-container.active .call-btn-text {
            opacity: 0;
        }

        /* ä¿¡æ¯æ¡† */
        .info-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #ffffff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            z-index: 1000;
            display: none;
            width: 300px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        /* å¤œé—´æ¨¡å¼ä¸‹ä¿¡æ¯æ¡† */
        .dark-mode .info-box {
            background-color: #333;
            color: #f0f0f0;
        }

        .info-box.show {
            display: block;
            opacity: 1;
            animation: fadeIn 1s forwards;
        }

        .info-box .icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .info-box .icon.success::before {
            content: 'âœ“';
            color: #28a745;
        }

        .info-box .icon.error::before {
            content: 'âœ–';
            color: #dc3545;
        }

        .info-box .message {
            font-size: 20px;
            color: #333;
        }

        /* å¤œé—´æ¨¡å¼ä¸‹æç¤ºä¿¡æ¯ */
        .dark-mode .info-box .message {
            color: #f0f0f0;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            cursor: pointer;
            color: #666;
        }

        /* å¤œé—´æ¨¡å¼ä¸‹å…³é—­æŒ‰é’® */
        .dark-mode .close-btn {
            color: #ccc;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* å¤œé—´æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
        .toggle-dark-mode-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            background: transparent;
            border: none;
            color: #f0f0f0; /* æ›´æ˜æ˜¾çš„é¢œè‰² */
            transition: color 0.3s;
        }

        .dark-mode .toggle-dark-mode-btn {
            color: #f0f0f0;
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>é€šçŸ¥è½¦ä¸»æŒªè½¦</h1>
        <textarea id="customMessage" class="input-box-textarea" placeholder="å¯ç•™ä¸‹è”ç³»æ–¹å¼ï¼Œæ–¹ä¾¿è½¦ä¸»è”ç³»æ‚¨ï¼å¯ç•™ç©ºï¼Œé»˜è®¤å‘é€ä¿¡æ¯ç»™è½¦ä¸»å°½å¿«å‰æ¥ç§»è½¦ï¼"></textarea>

        <div class="button-group">
            <button class="notify-btn" id="notifyBtn" onclick="notifyOwnerWithCustomMessage()">é€šçŸ¥è½¦ä¸»</button>
        </div>
    </div>
    <button class="toggle-dark-mode-btn" onclick="toggleDarkMode()">ğŸŒ™</button>

    <div class="info-box" id="infoBox">
        <span class="close-btn" onclick="closeInfoBox()">Ã—</span>
        <div class="icon" id="infoBoxIcon"></div>
        <div class="message" id="infoBoxMessage"></div>
    </div>

    <script>
        let isDarkMode = false;
        let lastNotificationTime = 0; // è®°å½•ä¸Šæ¬¡é€šçŸ¥çš„æ—¶é—´
        const phone = '17608462601';
        const wxpusherAppToken = 'AT_42SgggbnnXdnm3gzQPiYcbShLGTRYFgh';
        const wxpusherUIDs = ['UID_kJP2XxI6RxcVtjt4W3Ve1lRW5Zzp'];

        // åˆ‡æ¢å¤œé—´æ¨¡å¼
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            const button = document.querySelector('.toggle-dark-mode-btn');
            button.textContent = isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™';
        }

        // æ˜¾ç¤ºä¿¡æ¯æ¡†
        function showInfoBox(type, message) {
            const infoBox = document.getElementById('infoBox');
            const infoBoxIcon = document.getElementById('infoBoxIcon');
            const infoBoxMessage = document.getElementById('infoBoxMessage');
            
            infoBox.classList.remove('hide');
            infoBox.classList.add('show');
            infoBoxIcon.classList.remove('success', 'error');
            infoBoxIcon.classList.add(type);
            infoBoxMessage.textContent = message;

            setTimeout(() => {
                infoBox.classList.remove('show');
                infoBox.classList.add('hide');
            }, 3000); // 3ç§’åéšè—
        }

        // é€šçŸ¥è½¦ä¸»
        function notifyOwnerWithCustomMessage() {
            const currentTime = Date.now();
            if (currentTime - lastNotificationTime < 120000) { // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°2åˆ†é’Ÿé™åˆ¶120000
                const remainingTime = 120000 - (currentTime - lastNotificationTime);
                const minutes = Math.floor(remainingTime / 60000);
                const seconds = Math.floor((remainingTime % 60000) / 1000);
                showInfoBox('error', `è¯·ç­‰å¾… ${minutes} åˆ† ${seconds} ç§’ åå†é€šçŸ¥è½¦ä¸»ã€‚`);
                return;
            }

            const customMessage = document.getElementById('customMessage').value.trim();
            const messageToSend = customMessage.length > 0 ? customMessage : "æ‚¨å¥½ï¼Œæœ‰äººéœ€è¦æ‚¨æŒªè½¦ï¼Œè¯·åŠæ—¶å¤„ç†ã€‚";

            showInfoBox('success', 'æ­£åœ¨é€šçŸ¥è½¦ä¸»...');

            setTimeout(() => {
                notifyOwner(messageToSend);
                lastNotificationTime = Date.now(); // æ›´æ–°ä¸Šæ¬¡é€šçŸ¥æ—¶é—´
            }, 2000);  // å»¶è¿Ÿ2ç§’ï¼Œæ¨¡æ‹Ÿé€šçŸ¥è¿‡ç¨‹
        }

        function notifyOwner(messageToSend) {
            const bodyContent = {
                appToken: wxpusherAppToken,
                content: `${messageToSend}`,
                contentType: 1,
                uids: wxpusherUIDs
            };

            fetch("https://wxpusher.zjiecode.com/api/send/message", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(bodyContent)
            })
            .then(response => response.json())
            .then(data => {
                if (data.code === 1000) {
                    showInfoBox('success', 'å·²æˆåŠŸé€šçŸ¥è½¦ä¸»å‰æ¥ç§»è½¦ï¼Œè¯·ç¨åç­‰å¾…ï¼');
                } else {
                    showInfoBox('error', `é€šçŸ¥å‘é€å¤±è´¥: ${data.msg || 'æœªçŸ¥é”™è¯¯'}`);
                }
            })
            .catch(error => {
                showInfoBox('error', `é€šçŸ¥å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚é”™è¯¯: ${error.message}`);
            });
        }

        // æ‹¨æ‰“ç”µè¯
        function callOwner() {
            window.location.href = `tel:${phone}`;
        }

        // ç›‘å¬æ»‘å—æ»‘åŠ¨ï¼ˆè§¦æ‘¸æ”¯æŒï¼‰
        const callBtnContainer = document.getElementById('callBtnContainer');
        const callBtnSlider = document.getElementById('callBtnSlider');

        let startX;
        let isSliding = false;


// è§¦æ‘¸å¼€å§‹
callBtnContainer.addEventListener('touchstart', (event) => {
    startX = event.touches[0].clientX;
    isSliding = true;
    callBtnContainer.classList.remove('active');
    callBtnSlider.style.transition = 'none'; // ç¦æ­¢è¿‡æ¸¡ï¼Œå®æ—¶æ›´æ–°
    // éšè—æ–‡å­—å¹¶å‡†å¤‡åŠ¨ç”»
    const callBtnText = document.querySelector('.call-btn-text');
    callBtnText.style.transition = 'none';
    callBtnText.style.opacity = '0';
    callBtnText.style.transform = 'translateX(-100%)';  // è®©æ–‡å­—ç§»å‡ºè§†å›¾
});

// è§¦æ‘¸ç§»åŠ¨
callBtnContainer.addEventListener('touchmove', (event) => {
    if (!isSliding) return;
    let deltaX = event.touches[0].clientX - startX;
    if (deltaX >= 0) {
        const width = Math.min(deltaX, 250); // é™åˆ¶æœ€å¤§æ»‘åŠ¨è·ç¦»
        callBtnSlider.style.transform = `translateX(${width}px)`;  // æ»‘å—ç§»åŠ¨
        callBtnSlider.style.width = `${width}px`; // è°ƒæ•´æ»‘å—å®½åº¦
    }
});

// è§¦æ‘¸ç»“æŸ
callBtnContainer.addEventListener('touchend', () => {
    if (isSliding) {
        isSliding = false;
        const deltaX = parseInt(callBtnSlider.style.transform.replace('translateX(', '').replace('px)', ''));

        if (deltaX >= 250) {
            // å¦‚æœæ»‘åŠ¨è¾¾åˆ°250pxï¼Œè§¦å‘æ‹¨æ‰“ç”µè¯
            callBtnContainer.classList.add('active');
            callOwner();  // æ‰§è¡Œæ‹¨æ‰“ç”µè¯æ“ä½œ

            // è§¦å‘æ¢å¤æ»‘å—åŸä½
            setTimeout(() => {
                // æ¢å¤æ»‘å—åŸä½ï¼Œå¹¶æ˜¾ç¤ºè¿‡æ¸¡æ•ˆæœ
                callBtnSlider.style.transition = 'transform 0.3s ease, width 0.3s ease';
                callBtnSlider.style.transform = 'translateX(0)';
                callBtnSlider.style.width = '50px';

                // æ¢å¤æŒ‰é’®æ–‡å­—ï¼ŒåŠ å…¥åŠ¨æ€æ•ˆæœ
                const callBtnText = document.querySelector('.call-btn-text');
                callBtnText.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
                callBtnText.style.opacity = '1'; // æ¢å¤æŒ‰é’®æ–‡å­—é€æ˜åº¦
                callBtnText.style.transform = 'translateX(0)';  // æ–‡å­—ä»å·¦æ»‘å…¥
            }, 500); // åœ¨æ‹¨æ‰“ç”µè¯æ“ä½œä¹‹åï¼Œ500æ¯«ç§’æ¢å¤æ»‘å—åŸä½
        } else {
            // å¦åˆ™ï¼Œæ¢å¤æ»‘å—åŸä½
            callBtnSlider.style.transition = 'transform 0.3s ease, width 0.3s ease'; // æ¢å¤è¿‡æ¸¡æ•ˆæœ
            callBtnSlider.style.transform = 'translateX(0)';
            callBtnSlider.style.width = '50px'; // æ¢å¤ä¸ºåˆå§‹å®½åº¦

            // æ¢å¤æŒ‰é’®æ–‡å­—ï¼ŒåŠ å…¥åŠ¨æ€æ•ˆæœ
            const callBtnText = document.querySelector('.call-btn-text');
            callBtnText.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
            callBtnText.style.opacity = '1'; // æ¢å¤æŒ‰é’®æ–‡å­—é€æ˜åº¦
            callBtnText.style.transform = 'translateX(0)';  // æ–‡å­—ä»å·¦æ»‘å…¥
        }
    }
});





    </script>
</body>
    <link rel="stylesheet" href="1.css">
</html>
